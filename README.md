\# ๐ณ WHMCS Zarinpal Payment Gateway

ูุงฺูู ุฏุฑฺฏุงู ูพุฑุฏุงุฎุช **ุฒุฑูโูพุงู (Zarinpal)** ุจุฑุง **WHMCS**  

ุงู ูุงฺูู ุงูฺฉุงู ูพุฑุฏุงุฎุช ุงูู ู ุณุฑุน ุงุฒ ุทุฑู ุฏุฑฺฏุงู ุฒุฑูโูพุงู ุฑุง ุจุฑุง ฺฉุงุฑุจุฑุงู ูุฑุงูู ูโฺฉูุฏ.

\## ๐ ูฺฺฏโูุง

\- ูพุดุชุจุงู ฺฉุงูู ุงุฒ ูุณุฎูโูุง ุฌุฏุฏ WHMCS  

\- ุฑูุฒฺฏุฐุงุฑ ุงูู ุงุทูุงุนุงุช ูุงฺฉุชูุฑ (Base64 + Replace Encode)  

\- ุชุฃุฏ ุชุฑุงฺฉูุดโูุง ุงุฒ ุทุฑู API ุฑุณู ุฒุฑูโูพุงู (ูุณุฎู v4)  

\- ุซุจุช ุชุฑุงฺฉูุดโูุง ุฏุฑ ูุงฺฏ WHMCS  

\- ุจุงุฒฺฏุดุช ุฎูุฏฺฉุงุฑ ุจู ุตูุญู ูุงฺฉุชูุฑ ูพุณ ุงุฒ ูพุฑุฏุงุฎุช  

\- ูุฏุฑุช ุขุณุงู ู ูุตุจ ุณุฑุน

\## ๐งฉ ูพุดโูุงุฒูุง

\- ูุณุฎู whmcs **7.10 ุง ุจุงูุงุชุฑ**  

\- ูุนุงู ุจูุฏู ุงูุฒููู `cURL` ุฏุฑ PHP  

\- ุญุณุงุจ ฺฉุงุฑุจุฑ ูุนุงู ุฏุฑ \[[Zarinpal.com](http://Zarinpal.com)\](<https://zarinpal.com>)

\## โ๏ธ ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

1\. ูุงู ูุงฺูู ุฑุง ุฏุฑ ูุณุฑ ุฒุฑ ุขูพููุฏ ฺฉูุฏ:

2\. ูุงุฑุฏ ูพูู ูุฏุฑุช WHMCS ุดูุฏ:

3\. ุงุฒ ุจุฎุด **All Payment Gateways** ฺฏุฒูู **vozp** ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ.

4\. ุงุทูุงุนุงุช ุฒุฑ ุฑุง ูุงุฑุฏ ููุงุฏ:

| ูุฑฺูุฏ ฺฉุฏ | ุดูุงุณู ูุฑฺูุช ุฒุฑูโูพุงู ุดูุง |

| ูุงุญุฏ ูพูู| ูุงุญุฏ ูพูู (ุชููุงู ุง ุฑุงู) |

| ุฏูพุงุฑุชูุงู ฺฏุฒุงุฑุด ุงุฑุณุงู ุฎุทุง | ุฏุฑ ุตูุฑุช ฺฉู ฺฉุงุฑุจุฑ ุฎุทุง ุฏุฑ ูพุฑุฏุงุฎุช ุฏุงุดุชู ุจุงุดุฏ ุจุง ุฒุฏู ฺฉูุฏ ฺฏุฒุงุฑุด ุฎุทุง ุจู ุงู ุฏูพุงุฑุชูุงู ูพุดุชุจุงู ุชฺฉุช ุงุฑุณุงู ูุดูุฏ |

5\. ุชุบุฑุงุช ุฑุง ุฐุฎุฑู ฺฉูุฏ โ

\---

\## ๐ ุณุงุฎุช ููฺฉ ุฑูุฒฺฏุฐุงุฑโุดุฏู ูุงฺฉุชูุฑ

ุฏุฑ ุงู ูุงฺููุ ุงุทูุงุนุงุช ูุงฺฉุชูุฑ (ุดูุงุฑูุ ูุจูุบ ู ฺฉุงุฑุจุฑ) ุจุง ุชุงุจุน `decodeHash()` ุฑูุฒฺฏุดุง ูโุดููุฏ.

ููููู ุฑูุฒฺฏุฐุงุฑ ุฏุงุฏูโูุง:

```php
$replace = array(
 '1' => 'Q', '2' => 'W', '3' => 'E', '4' => 'Z',
 '5' => 'N', '6' => 'M', '7' => 'L', '8' => 'Y',
 '9' => 'U', '0' => 'D', ';' => 'V',
);
```

ุฏุฑ ููฺฏุงู ุจุงุฒฺฏุดุช ุงุฒ ุฒุฑูโูพุงูุ ุงุทูุงุนุงุช ุฑูุฒฺฏุดุง ุดุฏู ู ุจุฑุฑุณ ูโุดูุฏ.

๐ ูุฑุขูุฏ ูพุฑุฏุงุฎุช

ฺฉุงุฑุจุฑ ูุงฺฉุชูุฑ ุฑุง ุฏุฑ WHMCS ูุดุงูุฏู ูโฺฉูุฏ.

ุฑู ฺฏุฒูู ูพุฑุฏุงุฎุช ุจุง ุฒุฑูโูพุงู ฺฉูฺฉ ูโฺฉูุฏ.

ุงุทูุงุนุงุช ูุงฺฉุชูุฑ ุจู ุตูุฑุช ุฑูุฒฺฏุฐุงุฑโุดุฏู ุจู ุฏุฑฺฏุงู ุงุฑุณุงู ูโุดูุฏ.

ูพุณ ุงุฒ ูพุฑุฏุงุฎุชุ ุฒุฑูโูพุงู ูุชุฌู ุชุฑุงฺฉูุด ุฑุง ุจู ุงุณฺฉุฑูพุช callback ุจุงุฒูโฺฏุฑุฏุงูุฏ.

ุณุณุชู ูพุฑุฏุงุฎุช ุฑุง ุชุฃุฏ ฺฉุฑุฏู ู ูุงฺฉุชูุฑ ุฑุง ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ ูพุฑุฏุงุฎุชโุดุฏู ุซุจุช ูโฺฉูุฏ.

๐ ูุงูโูุง ุงุตู

ูุงู	ุชูุถุญ

modules/gateways/vozp.php	ูุงู ุงุตู ูุงฺูู ุฏุฑฺฏุงู ูพุฑุฏุงุฎุช

modules/gateways/callback/vozp.php	ุจุฑุฑุณ ูุถุนุช ุชุฑุงฺฉูุด ู ุซุจุช ูพุฑุฏุงุฎุช

**ูุณุชูุฏุงุช ูุงฺูู**

๐ง ุชูุถุญ ุชุงุจุน ุฑูุฒฺฏุดุง

```php
$replace = array(
 '1' => 'Q', '2' => 'W', '3' => 'E', '4' => 'Z',
 '5' => 'N', '6' => 'M', '7' => 'L', '8' => 'Y',
 '9' => 'U', '0' => 'D', ';' => 'V',
);
```

๐ฆ ูพุงุณุฎ ุณุฑูุฑ ุฒุฑูโูพุงู

ุฏุฑ ูุงู callbackุ ุชุฃุฏ ุชุฑุงฺฉูุด ุงุฒ ุทุฑู API ุฒุฑ ุงูุฌุงู ูโุดูุฏ:

POST <https://api.zarinpal.com/pg/v4/payment/verify.json>

ูพุงุฑุงูุชุฑูุง ุงุฑุณุงูโุดุฏู:

```{
  "merchant_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
  "authority": "A00000000000000000000000000123456789",
  "amount": 10000
}```

ุฏุฑ ุตูุฑุช ููููุช:

```{
  "data": {
    "code": 100,
    "ref_id": "1234567890"
  }
}```

๐ก๏ธ ูฺฉุงุช ุงููุช

ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู URL ุจุงุฒฺฏุดุช (callback) ููุท ุงุฒ ุทุฑู HTTPS ุฏุฑ ุฏุณุชุฑุณ ุจุงุดุฏ.

ูฺ ุฏุงุฏูโุง ุฑุง ุจุฏูู ุฑูุฒฺฏุฐุงุฑ ุงุฑุณุงู ูฺฉูุฏ.

ุงุฒ ุชูฺฉู ูุนุชุจุฑ ุฒุฑูโูพุงู ุงุณุชูุงุฏู ฺฉูุฏ.

๐จโ๐ป ุชูุณุนูโุฏููุฏู

ุชูุณุนูโุฏููุฏู: Vahab Seyed Chorteh

ูุจุณุงุช: [vahabonline.ir](http://vahabonline.ir)

๐ ูุฌูุฒ (License)

ฺฉุฏ ููุจุน ุชุญุช ูุฌูุฒ MIT License ููุชุดุฑ ุดุฏู ุงุณุช.

ุดูุง ูโุชูุงูุฏ ุขุฒุงุฏุงูู ุขู ุฑุง ูุฑุงุดุ ุชูุณุนู ู ุงุณุชูุงุฏู ููุงุฏ.

โญ ุญูุงุช ฺฉูุฏ

ุงฺฏุฑ ุงู ูุงฺูู ุจุฑุง ุดูุง ููุฏ ุจูุฏุ ุจุง ุฏุงุฏู โญ ุฏุฑ GitHub ุงุฒ ุชูุณุนู ุงุฏุงููโุงุด ุญูุงุช ฺฉูุฏ ๐
